<!DOCTYPE html>
<html>
<head>
<script>
  const regexB64Match = /.*data:text\/html;base64,([a-zA-Z0-9=+]+)/.exec(location.href);
  const regexEscMatch = /.*data:text\/html,([a-zA-Z0-9=@/+%]+)/.exec(location.href);
  let targetURL = "data:text/html," + escape(`<h1>Invalid URL</h1>`);
  
  if (regexB64Match)
  {
    targetURL = "data:text/html;base64," + regexB64Match[1];
  }
  else if (regexEscMatch)
  {
    targetURL = "data:text/html," + regexEscMatch[1];
  }
  
  // See https://stackoverflow.com/questions/503093/how-do-i-redirect-to-another-webpage
  location.replace(targetURL);
  
  // If the above didn't work,
  const redirectLink = document.createElement("a");
  redirectLink.innerHTML = "Redirect";
  redirectLink.setAttribute("href", targetURL);
  document.body.appendChild(redirectLink);
  
  // Also, retry with window.location = ...
  setTimeout(() =>
  {
    window.location = targetURL;
  }, 1000);
</script>
</head>
  <body>
    <p>Attempting to redirect...</p>
  </body>
</html>
